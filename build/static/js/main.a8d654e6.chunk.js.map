{"version":3,"sources":["components/Persons.js","components/Input.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Persons","persons","eventHandler","map","person","key","id","name","number","value","data-name","onClick","Input","text","onChange","PersonForm","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Notification","message","isError","notificationStyle","color","background","borderStyle","borderRadius","borderColor","fontSize","style","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","setPersons","setNewName","setNewNumber","searchTerm","setSearchTerm","notificationMessage","setNotificationMessage","setIsError","useEffect","personService","initialPersons","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","find","window","confirm","selectedPerson","returnedPerson","catch","error","status","setTimeout","personObject","concat","dataset","console","log","ReactDOM","render","document","getElementById"],"mappings":"qMAaeA,EAXC,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,QAASC,EAAmB,EAAnBA,aAC1B,OACE,6BACGD,EAAQE,KAAI,SAAAC,GAAM,OACnB,yBAAKC,IAAKD,EAAOE,IACdF,EAAOG,KADV,IACiBH,EAAOI,OADxB,IACgC,4BAAQC,MAAOL,EAAOE,GAAII,YAAWN,EAAOG,KAAMI,QAAST,GAA3D,gBCGvBU,EARD,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,KAAMJ,EAA0B,EAA1BA,MAAOP,EAAmB,EAAnBA,aAC5B,OACE,6BACGW,EADH,KACU,2BAAOJ,MAAOA,EAAOK,SAAUZ,MCQ9Ba,EAVI,SAAC,GAA6E,IAA3EC,EAA0E,EAA1EA,UAAWC,EAA+D,EAA/DA,QAASC,EAAsD,EAAtDA,UAAWC,EAA2C,EAA3CA,iBAAkBC,EAAyB,EAAzBA,mBACrE,OACE,0BAAMC,SAAUL,GACd,kBAAC,EAAD,CAAOH,KAAK,OAAOJ,MAAOQ,EAASf,aAAciB,IACjD,kBAAC,EAAD,CAAON,KAAK,SAASJ,MAAOS,EAAWhB,aAAckB,IACrD,6BAAK,4BAAQE,KAAK,UAAb,UCaIC,EAnBM,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QAC/B,GAAgB,OAAZD,EACF,OAAO,KAGT,IAAME,EAAoB,CACxBC,MAAOF,EAAU,MAAQ,QACzBG,WAAYH,EAAU,YAAc,aACpCI,YAAa,QACbC,aAAc,EACdC,YAAaN,EAAU,MAAQ,QAC/BO,SAAU,IAGZ,OACE,uBAAGC,MAAOP,GAAoBF,I,gBChB5BU,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB5B,EAfA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa5B,EAVI,SAACjC,GAElB,OADgB6B,IAAMO,OAAN,UAAgBR,EAAhB,YAA2B5B,IAC5B+B,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ5B,EALM,SAACjC,EAAIkC,GAExB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwB5B,GAAMkC,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SC+I5BK,EA5JH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT5C,EADS,KACA6C,EADA,OAEcD,mBAAS,IAFvB,mBAET5B,EAFS,KAEA8B,EAFA,OAGkBF,mBAAS,IAH3B,mBAGT3B,EAHS,KAGE8B,EAHF,OAIoBH,mBAAS,IAJ7B,mBAITI,EAJS,KAIGC,EAJH,OAKsCL,mBAAS,MAL/C,mBAKTM,EALS,KAKYC,EALZ,OAMcP,oBAAS,GANvB,mBAMTpB,EANS,KAMA4B,EANA,KAQhBC,qBAAU,WACRC,IAEGlB,MAAK,SAAAmB,GACJV,EAAWU,QAEd,IAEH,IAAMC,EAA+B,KAAfR,EAClBhD,EACAA,EAAQyD,QAAO,SAAAtD,GAAM,OAAIA,EAAOG,KAAKoD,cAAcC,SAASX,EAAWU,kBAuH3E,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcnC,QAAS2B,EAAqB1B,QAASA,IACrD,kBAAC,EAAD,CAAOZ,KAAK,SAASJ,MAAOwC,EAAY/C,aARb,SAAC2D,GAC9BX,EAAcW,EAAMC,OAAOrD,UAQzB,0CACA,kBAAC,EAAD,CACEO,UA5HY,SAAC6C,GAGjB,GAFAA,EAAME,iBAEF9D,EAAQ+D,MAAK,SAAA5D,GAAM,OAAIA,EAAOG,KAAKoD,gBAAkB1C,EAAQ0C,kBAC/D,GAAIM,OAAOC,QAAP,UAAkBjD,EAAlB,iFAAkGC,EAAlG,MAAiH,CACnH,IAAMiD,EAAc,2BACflE,EAAQ+D,MAAK,SAAA5D,GAAM,OAAIA,EAAOG,KAAKoD,gBAAkB1C,EAAQ0C,kBAD9C,IAElBnD,OAAQU,IAGVqC,EACgBY,EAAe7D,GAAI6D,GAChC9B,MAAK,SAAA+B,GACJtB,EAAW7C,EAAQE,KAAI,SAAAC,GAAM,OAAIA,EAAOE,KAAO6D,EAAe7D,GAAKF,EAASgE,MAC5ErB,EAAW,IACXC,EAAa,OAEdqB,OAAM,SAAAC,GACLjB,GAAW,GAEmB,MAA1BiB,EAAMhC,SAASiC,QACjBzB,EAAW7C,EAAQyD,QAAO,SAAAtD,GAAM,OAAIA,EAAOE,KAAO6D,EAAe7D,OACjE8C,EAAuB,uCAAD,OACmBe,EAAe5D,KADlC,gDAItB6C,EAAuBkB,EAAMhC,SAASC,KAAK+B,OAG7CE,YAAW,WACTpB,EAAuB,MACvBC,GAAW,KACV,QAGPD,EAAuB,sBAAD,OACEe,EAAe5D,OAGvCiE,YAAW,WACTpB,EAAuB,QACtB,UAEA,CAEL,IAAMqB,EAAe,CACnBlE,KAAMU,EAAST,OAAQU,GAGzBqC,EACUkB,GACPpC,MAAK,SAAA+B,GACJtB,EAAW7C,EAAQyE,OAAON,IAC1BrB,EAAW,IACXC,EAAa,OAEdqB,OAAM,SAAAC,GACLlB,EAAuBkB,EAAMhC,SAASC,KAAK+B,UAG/ClB,EAAuB,SAAD,OACXqB,EAAalE,OAGxBiE,YAAW,WACTpB,EAAuB,QACtB,OA2DDnC,QAASA,EACTC,UAAWA,EACXC,iBAtBmB,SAAC0C,GACxBd,EAAWc,EAAMC,OAAOrD,QAsBpBW,mBAnBqB,SAACyC,GAC1Bb,EAAaa,EAAMC,OAAOrD,UAoBxB,uCACA,kBAAC,EAAD,CAASR,QAASwD,EAAevD,aA7DhB,SAAC2D,GACpB,IAAMvD,EAAKuD,EAAMC,OAAOrD,MAClBF,EAAOsD,EAAMC,OAAOa,QAAQpE,KAE9B0D,OAAOC,QAAP,iBAAyB3D,EAAzB,QACFgD,EACcjD,GACX+B,KAAKS,EAAW7C,EAAQyD,QAAO,SAAAtD,GAAM,OAAIA,EAAOE,KAAOA,OACvD+D,OAAM,SAAAC,GACLM,QAAQC,IAAIP,GACZjB,GAAW,GACXP,EAAW7C,EAAQyD,QAAO,SAAAtD,GAAM,OAAIA,EAAOE,KAAOA,MAElD8C,EAAuB,UAAD,OACV7C,EADU,+CAItBiE,YAAW,WACTpB,EAAuB,MACvBC,GAAW,KACV,QAKPD,EAAuB,WAAD,OACT7C,IAGbiE,YAAW,WACTpB,EAAuB,QACtB,WC5HT0B,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.a8d654e6.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({ persons, eventHandler }) => {\r\n  return (\r\n    <div>\r\n      {persons.map(person => \r\n      <div key={person.id}>\r\n        {person.name} {person.number} <button value={person.id} data-name={person.name} onClick={eventHandler}>Delete</button>\r\n      </div>)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Input = ({ text, value, eventHandler }) => {\r\n  return (\r\n    <div>\r\n      {text}: <input value={value} onChange={eventHandler} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Input","import React from 'react'\r\nimport Input from './Input'\r\n\r\nconst PersonForm = ({ addPerson, newName, newNumber, handleNameChange, handleNumberChange }) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <Input text='Name' value={newName} eventHandler={handleNameChange} />\r\n      <Input text='Number' value={newNumber} eventHandler={handleNumberChange} />\r\n      <div><button type=\"submit\">Add</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const notificationStyle = {\r\n    color: isError ? 'red' : 'green',\r\n    background: isError ? 'lightpink' : 'lightgreen',\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    borderColor: isError ? 'red' : 'green',\r\n    fontSize: 20\r\n  }\r\n\r\n  return (\r\n    <p style={notificationStyle}>{message}</p>\r\n  )\r\n}\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteById = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst updateNumber = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, deleteById, updateNumber }","import React, { useEffect, useState } from 'react'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Notification from './components/Notification'\r\nimport personService from './services/persons'\r\nimport Input from './components/Input'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [searchTerm, setSearchTerm] = useState('')\r\n  const [notificationMessage, setNotificationMessage] = useState(null)\r\n  const [isError, setIsError] = useState(false)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  const personsToShow = searchTerm === ''\r\n    ? persons\r\n    : persons.filter(person => person.name.toLowerCase().includes(searchTerm.toLowerCase()))\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    if (persons.find(person => person.name.toLowerCase() === newName.toLowerCase())) {\r\n      if (window.confirm(`${newName} has already been added to the phonebook. Replace the old number with ${newNumber}?`)) {\r\n        const selectedPerson = {\r\n          ...persons.find(person => person.name.toLowerCase() === newName.toLowerCase()),\r\n          number: newNumber\r\n        }\r\n\r\n        personService\r\n          .updateNumber(selectedPerson.id, selectedPerson)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => person.id !== selectedPerson.id ? person : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n          })\r\n          .catch(error => {\r\n            setIsError(true)\r\n\r\n            if (error.response.status === 404) {\r\n              setPersons(persons.filter(person => person.id !== selectedPerson.id))\r\n              setNotificationMessage(\r\n                `Error: Could not change the number. ${selectedPerson.name} has already been removed from the server.`\r\n              )\r\n            } else {\r\n              setNotificationMessage(error.response.data.error)\r\n            }\r\n\r\n            setTimeout(() => {\r\n              setNotificationMessage(null)\r\n              setIsError(false)\r\n            }, 5000)\r\n          })\r\n\r\n        setNotificationMessage(\r\n          `Changed number for ${selectedPerson.name}`\r\n        )\r\n\r\n        setTimeout(() => {\r\n          setNotificationMessage(null)\r\n        }, 5000)\r\n      }\r\n    } else {\r\n\r\n      const personObject = {\r\n        name: newName, number: newNumber\r\n      }\r\n\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n          setNewName('')\r\n          setNewNumber('')\r\n        })\r\n        .catch(error => {\r\n          setNotificationMessage(error.response.data.error)\r\n        })\r\n\r\n      setNotificationMessage(\r\n        `Added ${personObject.name}`\r\n      )\r\n\r\n      setTimeout(() => {\r\n        setNotificationMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const deletePerson = (event) => {\r\n    const id = event.target.value\r\n    const name = event.target.dataset.name\r\n\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      personService\r\n        .deleteById(id)\r\n        .then(setPersons(persons.filter(person => person.id !== id)))\r\n        .catch(error => {\r\n          console.log(error)\r\n          setIsError(true)\r\n          setPersons(persons.filter(person => person.id !== id))\r\n\r\n          setNotificationMessage(\r\n            `Error: ${name} has already been removed from the server.`\r\n          )\r\n\r\n          setTimeout(() => {\r\n            setNotificationMessage(null)\r\n            setIsError(false)\r\n          }, 5000)\r\n\r\n          return\r\n        })\r\n\r\n      setNotificationMessage(\r\n        `Deleted ${name}`\r\n      )\r\n\r\n      setTimeout(() => {\r\n        setNotificationMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleSearchTermChange = (event) => {\r\n    setSearchTerm(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification message={notificationMessage} isError={isError} />\r\n      <Input text=\"Search\" value={searchTerm} eventHandler={handleSearchTermChange} />\r\n      <h2>Add person</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={personsToShow} eventHandler={deletePerson} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}